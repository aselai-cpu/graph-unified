# Production Configuration Profile
# Balanced settings for production deployments

version: "1.0"

llm:
  provider: "anthropic"
  model: "claude-3-5-sonnet-20241022"  # Balanced quality/cost
  api_key: "${ANTHROPIC_API_KEY}"
  temperature: 0.0
  max_tokens: 4096
  timeout: 60
  rate_limit:
    requests_per_minute: 50
    tokens_per_minute: 40000
  retry:
    max_attempts: 3
    backoff_factor: 2.0

embedding:
  provider: "voyage"
  model: "voyage-3"
  api_key: "${VOYAGE_API_KEY}"
  dimension: 1024
  batch_size: 128
  normalize: true

chunking:
  strategy: "fixed"
  chunk_size: 512
  chunk_overlap: 64
  respect_boundaries: true
  encoding_name: "cl100k_base"

extraction:
  entity_types:
    - "PERSON"
    - "ORGANIZATION"
    - "LOCATION"
    - "EVENT"
    - "CONCEPT"
    - "TECHNOLOGY"
  relationship_types:
    - "RELATED_TO"
    - "PART_OF"
    - "LOCATED_IN"
    - "WORKS_FOR"
    - "CAUSES"
  max_gleanings: 1  # Two passes (initial + 1 gleaning)
  min_confidence: 0.7
  enable_coreference: false

strategies:
  naive:
    enabled: true
  hybrid:
    enabled: true
    alpha: 0.5
    bm25_k1: 1.5
    bm25_b: 0.75
  graphrag:
    enabled: true
    leiden_resolution: 1.0
    max_community_size: 50
    generate_reports: true
  lightrag:
    enabled: true
    entity_weight: 0.6
  hipporag:
    enabled: true
    ppr_alpha: 0.85

storage:
  root_dir: "./output"
  parquet_compression: "snappy"
  vector_db:
    backend: "lancedb"
    index_type: "IVF_FLAT"
  graph_format: "graphml"

query:
  default_strategy: "auto"
  top_k: 10
  generation:
    enabled: true
    temperature: 0.3
    max_tokens: 1000
  routing:
    enabled: true
    strategy: "rule_based"

performance:
  workers: 10
  batch_size: 10
  cache_embeddings: true
  enable_profiling: true  # Enable profiling in production

logging:
  level: "INFO"
  format: "text"
  output: "both"  # Log to both stdout and file
  file_path: "./logs/graphunified-prod.log"
